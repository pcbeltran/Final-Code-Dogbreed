{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { usersCollection } from \"../data/firebase\";\n\nfunction useAllBreeds(userId, filterBreeds) {\n  _s();\n\n  const [breeds, setBreeds] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  useEffect(() => {\n    setIsLoading(true);\n\n    const onNext = snapshot => {\n      setIsLoading(false);\n      const docs = snapshot.docs;\n      setBreeds(docs);\n    };\n\n    const onError = error => {\n      setIsLoading(false);\n      setErrorMessage(\"There was a problem loading your breed ratings. Please try again.\");\n      console.error(error);\n    };\n\n    const travelref = usersCollection.doc(userId).collection(\"breeds\");\n    let unsubscribe;\n\n    if (filterBreeds === \"A\") {\n      unsubscribe = travelref.orderBy(\"rating\", \"desc\").onSnapshot(onNext, onError);\n    } else if (filterTravel === \"pasttravel\") {\n      unsubscribe = travelref.where(\"hasHappened\", \"==\", true).onSnapshot(onNext, onError);\n    } else if (filterTravel === \"futuretravel\") {\n      unsubscribe = travelref.where(\"hasHappened\", \"!=\", true).onSnapshot(onNext, onError);\n    }\n\n    return unsubscribe;\n  }, [userId, filterBreeds]);\n  return [breeds, isLoading, errorMessage];\n}\n\n_s(useAllBreeds, \"AIPeULl4FfNU4Qfu+jD58Rdded0=\");\n\nexport default useAllBreeds;","map":{"version":3,"sources":["/Users/user/Downloads/FA20-CodeSprint-Code-master-19/Code Sprint C/Week 05/movie-app-with-accounts-starter/src/hooks/use-all-breeds.js"],"names":["useState","useEffect","usersCollection","useAllBreeds","userId","filterBreeds","breeds","setBreeds","isLoading","setIsLoading","errorMessage","setErrorMessage","onNext","snapshot","docs","onError","error","console","travelref","doc","collection","unsubscribe","orderBy","onSnapshot","filterTravel","where"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,eAAT,QAAgC,kBAAhC;;AAEA,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,YAA9B,EAA4C;AAAA;;AAC1C,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACU,YAAD,EAAeC,eAAf,IAAkCX,QAAQ,CAAC,EAAD,CAAhD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,YAAY,CAAC,IAAD,CAAZ;;AAEA,UAAMG,MAAM,GAAIC,QAAD,IAAc;AAC3BJ,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACA,YAAMK,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACAP,MAAAA,SAAS,CAACO,IAAD,CAAT;AACD,KAJD;;AAMA,UAAMC,OAAO,GAAIC,KAAD,IAAW;AACzBP,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,MAAAA,eAAe,CAAC,mEAAD,CAAf;AACAM,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD,KAJD;;AAMA,UAAME,SAAS,GAAGhB,eAAe,CAACiB,GAAhB,CAAoBf,MAApB,EAA4BgB,UAA5B,CAAuC,QAAvC,CAAlB;AACA,QAAIC,WAAJ;;AACA,QAAIhB,YAAY,KAAK,GAArB,EAA0B;AACxBgB,MAAAA,WAAW,GAAGH,SAAS,CAACI,OAAV,CAAkB,QAAlB,EAA4B,MAA5B,EAAoCC,UAApC,CAA+CX,MAA/C,EAAuDG,OAAvD,CAAd;AACD,KAFD,MAEO,IAAIS,YAAY,KAAK,YAArB,EAAmC;AACxCH,MAAAA,WAAW,GAAGH,SAAS,CAACO,KAAV,CAAgB,aAAhB,EAA+B,IAA/B,EAAqC,IAArC,EAA2CF,UAA3C,CAAsDX,MAAtD,EAA8DG,OAA9D,CAAd;AACD,KAFM,MAEA,IAAIS,YAAY,KAAK,cAArB,EAAqC;AAC1CH,MAAAA,WAAW,GAAGH,SAAS,CAACO,KAAV,CAAgB,aAAhB,EAA+B,IAA/B,EAAqC,IAArC,EAA2CF,UAA3C,CAAsDX,MAAtD,EAA8DG,OAA9D,CAAd;AACD;;AAED,WAAOM,WAAP;AACD,GA1BQ,EA0BN,CAACjB,MAAD,EAASC,YAAT,CA1BM,CAAT;AA4BA,SAAO,CAACC,MAAD,EAASE,SAAT,EAAoBE,YAApB,CAAP;AACD;;GAlCQP,Y;;AAoCT,eAAeA,YAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { usersCollection } from \"../data/firebase\";\n\nfunction useAllBreeds(userId, filterBreeds) {\n  const [breeds, setBreeds] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    setIsLoading(true);\n\n    const onNext = (snapshot) => {\n      setIsLoading(false);\n      const docs = snapshot.docs;\n      setBreeds(docs);\n    };\n\n    const onError = (error) => {\n      setIsLoading(false);\n      setErrorMessage(\"There was a problem loading your breed ratings. Please try again.\");\n      console.error(error);\n    };\n\n    const travelref = usersCollection.doc(userId).collection(\"breeds\");\n    let unsubscribe;\n    if (filterBreeds === \"A\") {\n      unsubscribe = travelref.orderBy(\"rating\", \"desc\").onSnapshot(onNext, onError);\n    } else if (filterTravel === \"pasttravel\") {\n      unsubscribe = travelref.where(\"hasHappened\", \"==\", true).onSnapshot(onNext, onError);\n    } else if (filterTravel === \"futuretravel\") {\n      unsubscribe = travelref.where(\"hasHappened\", \"!=\", true).onSnapshot(onNext, onError);\n    }\n\n    return unsubscribe;\n  }, [userId, filterBreeds]);\n\n  return [breeds, isLoading, errorMessage];\n}\n\nexport default useAllBreeds;\n"]},"metadata":{},"sourceType":"module"}